class Solution {
public:
    int size;
    unordered_set<int>col;
    unordered_set<int>dia;
    //unordered_set<vector<string>>solutions;
    unordered_set<int>antidia;
    int totalNQueens(int n) {
        size = n;
        //vector<vector<char>>b(n,vector<char>(n,'.'));
       
        return  backtrack(0);
    }
    int backtrack(int row){
        if(row==size){
           return 1;
        }
        int solutions=0;
        for(int i=0;i<size;i++){
            int d = row - i;
            int ad = row+i;
            if(col.count(i) || dia.count(d) || antidia.count(ad)){
                continue;
            }
            col.insert(i);
            dia.insert(d);
            antidia.insert(ad);
            
            solutions+= backtrack(row+1);
            // we want to erase in
            col.erase(i);
            dia.erase(d);
            antidia.erase(ad);
            
           

        }
         return solutions;
    }
    
};
